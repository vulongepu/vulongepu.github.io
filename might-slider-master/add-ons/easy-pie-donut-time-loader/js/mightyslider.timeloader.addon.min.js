/**
 * mightySlider "Time Loader" addon
 * http://mightyslider.com/
 * 
 * @version:  1.0.0
 * @released: June 21, 2015
 * 
 * @author:   Hemn Chawroka
 *            http://iprodev.com/
 * 
 */
(function(x,y){function z(b,a){for(var g in a)b[g]=a[g];return b}if("undefined"===typeof mightySlider)console&&console.warn("Time loader needs mightySlider! Please include mightySlider script into your page.");else{var A=Math.abs,n=Math.PI,B=function(b,a,g,h,c,e,d){e=Math.min(Math.max(-1,e||0),1);var t=0>=e?!0:!1;d||(h-=2*c);b.beginPath();b.arc(0,0,a,0,2*n*e,t);b.strokeStyle=g;b.lineWidth=h;b.stroke()},C=function(b,a,g,h,c,e,d){e=Math.min(Math.max(-1,e||0),1);h=0>=e?!0:!1;d||(a-=c);b.beginPath();b.moveTo(0,0);b.arc(0,0,a,0,2*n*e,h);b.fillStyle=g;b.fill()},D=function(b,a){var g=this,h;"undefined"!==typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(b);var c=b.getContext("2d");b.width=b.height=a.size;var e=window.devicePixelRatio;b.style.width=b.style.height=[a.size,"px"].join("");b.width=b.height=a.size*e;c.scale(e,e);c.translate(a.size/2,a.size/2);c.rotate((-.5+a.rotate/180)*n);var d=(a.size-a.lineWidth)/2;a.scaleColor&&a.scaleLength&&(d=d-a.scaleLength-2);var d=A(d),t="donut"===a.mode.toLowerCase()?B:C,m=function(){if(a.scaleColor){var b,e;c.lineWidth=1;c.fillStyle=a.scaleColor;c.save();for(var f=24;0<f;--f)0===f%6?(e=a.scaleLength,b=0):(e=.6*a.scaleLength,b=a.scaleLength-e),c.fillRect(-a.size/2+b,0,e,1),c.rotate(n/12);c.restore()}a.trackColor&&t(c,d,a.trackColor,a.lineWidth,a.trackSpace,1,1)};g.clear=function(){c.clearRect(a.size/-2,a.size/-2,a.size,a.size)};g.draw=function(b){a.scaleColor||a.trackColor?c.getImageData&&c.putImageData?h?c.putImageData(h,0,0):(m(),h=c.getImageData(0,0,a.size*e,a.size*e)):(g.clear(),m()):g.clear();c.lineCap=a.lineCap;var k;k="function"===typeof a.barColor?a.barColor.call(g,b):a.barColor;t(c,d,k,a.lineWidth,a.trackSpace,b)}};x.mightySliderTimerLoader=function(b,a){function g(a,b){c.update(b)}function h(a){b.isPaused&&c.update(0)}if("object"!==typeof b)console&&console.warn("There is no valid mightySlider instance API!");else{var c=this,e=b.frame,d=z({mode:"pie",barColor:"#ef1e25",trackColor:"#f9f9f9",scaleColor:"#dfe0e0",txtColor:!1,scaleLength:5,lineCap:"round",lineWidth:3,trackSpace:0,size:50,rotate:0,position:"top right",offset:10,txtShow:!1,txtMask:"{d}%",fontSize:"13px",fontWeight:"normal",reverse:!1},a),t=d.reverse?1:0,m=[],p=e.firstChild,k,f;k=document.createElement("canvas");e.insertBefore(k,p);m.push(k);d.txtColor&&(f=document.createElement("div"),f.className="timeLoaderTxt",e.insertBefore(f,p),f.style.pointerEvents="none",f.style.lineHeight=d.size+"px",f.style.textAlign="center",f.style.fontSize=d.fontSize,f.style.fontWeight=d.fontWeight,f.style.color=d.txtColor,f.style.width=f.style.height=d.size+"px",m.push(f));var q=d.offset,r=d.position,p="",n="auto",v="auto",u="auto",w="auto";-1!==r.indexOf("top")?n=q+"px":-1!==r.indexOf("middle")?(p+="translateY(-50%) ",n="50%"):-1!==r.indexOf("bottom")&&(v=q+"px");-1!==r.indexOf("left")?u=q+"px":-1!==r.indexOf("center")?(p+="translateX(-50%) ",u="50%"):-1!==r.indexOf("right")&&(w=q+"px");for(var q=0,r=m.length,l;q<r;q++)l=m[q],l.style.position="absolute",l.style.zIndex="1000",l.style.cursor="pointer",l.style.top=n,l.style.bottom=v,l.style.left=u,l.style.right=w,l.style[l.style.WebkitTransform!==y?"WebkitTransform":"transform"]=p;k.addEventListener("click",function(){b.toggleCycling()},!1);c.update=function(a){a=parseFloat(a);d.reverse&&(a=1-a);c.renderer.draw(a);if(f){var b=Math.round(100*a);f.textContent=d.txtMask.replace(/{d}/g,(10>b?"0":"")+b)}t=a;return c};c.init=function(){c.el=k;c.options=d;c.renderer=new D(k,d);c.update(t)};c.init();b.on("progress",g);b.on("active",h);b.one("destroy",function(){b.off("progress",g);b.off("active",h);for(var a=0,d=m.length;a<d;a++)e.removeChild(m[a]);f=k=null;c.el=null})}}}})(this);